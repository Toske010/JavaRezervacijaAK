--------------------------------------------------------
--  File created - Thursday-August-20-2020   
--------------------------------------------------------
DROP TABLE "C##STEFAN"."AERODROM";
DROP TABLE "C##STEFAN"."KORISNICI";
DROP TABLE "C##STEFAN"."KORISNIK";
DROP TABLE "C##STEFAN"."RASPORED_LETOVA";
DROP TABLE "C##STEFAN"."REGISTRACIJA";
DROP TABLE "C##STEFAN"."REZERVACIJA";
--------------------------------------------------------
--  DDL for Sequence KORISNIK_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "C##STEFAN"."KORISNIK_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence REGISTRACIJA_SEQ1
--------------------------------------------------------

   CREATE SEQUENCE  "C##STEFAN"."REGISTRACIJA_SEQ1"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 61 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Table AERODROM
--------------------------------------------------------

  CREATE TABLE "C##STEFAN"."AERODROM" 
   (	"AERODROMID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"IMEAERODROMA" VARCHAR2(50 BYTE), 
	"DRZAVA" VARCHAR2(30 BYTE), 
	"GRAD" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table KORISNICI
--------------------------------------------------------

  CREATE TABLE "C##STEFAN"."KORISNICI" 
   (	"KORISNIKID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"IME" VARCHAR2(30 BYTE), 
	"PREZIME" VARCHAR2(30 BYTE), 
	"USERNAME" VARCHAR2(30 BYTE), 
	"LOZINKA" VARCHAR2(40 BYTE), 
	"TIP_KORISNIKA" VARCHAR2(25 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table KORISNIK
--------------------------------------------------------

  CREATE TABLE "C##STEFAN"."KORISNIK" 
   (	"ID" NUMBER(*,0), 
	"USERNAME" VARCHAR2(64 BYTE), 
	"PASSWORD" VARCHAR2(64 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table RASPORED_LETOVA
--------------------------------------------------------

  CREATE TABLE "C##STEFAN"."RASPORED_LETOVA" 
   (	"BROJLETA" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"ID_POLAZNOG_AERODROMA" NUMBER, 
	"ID_ODREDISNOG_AERODROMA" NUMBER, 
	"VREME_POLASKA" DATE, 
	"VREME_DOLASKA" DATE, 
	"UKUPNO_SEDISTA" NUMBER(*,0), 
	"CENA_KARTE" NUMBER
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table REGISTRACIJA
--------------------------------------------------------

  CREATE TABLE "C##STEFAN"."REGISTRACIJA" 
   (	"ID" NUMBER(*,0), 
	"IME" VARCHAR2(32 BYTE), 
	"PREZIME" VARCHAR2(32 BYTE), 
	"JMBG" LONG, 
	"ADRESA" VARCHAR2(128 BYTE), 
	"KONTAKT_TELEFON" VARCHAR2(32 BYTE), 
	"REGISTARSKA_OZNAKA" VARCHAR2(16 BYTE), 
	"MARKA" VARCHAR2(32 BYTE), 
	"MODEL" VARCHAR2(32 BYTE), 
	"BOJA" VARCHAR2(16 BYTE), 
	"BROJ_SASIJE" VARCHAR2(128 BYTE), 
	"GODINA_PROIZVODNJE" NUMBER(*,0), 
	"ZAPREMINA_MOTORA" NUMBER(*,0), 
	"SNAGA_MOTORA" NUMBER(*,0), 
	"DATUM_REGISTRACIJE" DATE, 
	"REGISTROVAN_DO" DATE, 
	"KORISNIK_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" 
  NO INMEMORY ("JMBG") ;
--------------------------------------------------------
--  DDL for Table REZERVACIJA
--------------------------------------------------------

  CREATE TABLE "C##STEFAN"."REZERVACIJA" 
   (	"REZERVACIJAID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"KORISNIKID" NUMBER, 
	"BROJLETA" NUMBER, 
	"GRADPOLAZAK" VARCHAR2(50 BYTE), 
	"GRADDOLAZAK" VARCHAR2(50 BYTE), 
	"DRZAVAPOLAZAK" VARCHAR2(50 BYTE), 
	"DRZAVADOLAZAK" VARCHAR2(50 BYTE), 
	"AERODROMPOLAZAK" VARCHAR2(50 BYTE), 
	"AERODROMDOLAZAK" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
REM INSERTING into C##STEFAN.AERODROM
SET DEFINE OFF;
Insert into C##STEFAN.AERODROM (AERODROMID,IMEAERODROMA,DRZAVA,GRAD) values (2,'Batna Airport','Algeria','Batna');
Insert into C##STEFAN.AERODROM (AERODROMID,IMEAERODROMA,DRZAVA,GRAD) values (3,'Jose Marti International Airport','Cuba','Havana');
Insert into C##STEFAN.AERODROM (AERODROMID,IMEAERODROMA,DRZAVA,GRAD) values (1,'Nikola Tesla','Serbia','Belgrade');
Insert into C##STEFAN.AERODROM (AERODROMID,IMEAERODROMA,DRZAVA,GRAD) values (4,'Poretta Airport','France','Bastia');
Insert into C##STEFAN.AERODROM (AERODROMID,IMEAERODROMA,DRZAVA,GRAD) values (5,'Bilbao Airport','Spain','Bilbao');
REM INSERTING into C##STEFAN.KORISNICI
SET DEFINE OFF;
REM INSERTING into C##STEFAN.KORISNIK
SET DEFINE OFF;
Insert into C##STEFAN.KORISNIK (ID,USERNAME,PASSWORD) values (1,'admin','admin');
Insert into C##STEFAN.KORISNIK (ID,USERNAME,PASSWORD) values (2,'user','user');
REM INSERTING into C##STEFAN.RASPORED_LETOVA
SET DEFINE OFF;
REM INSERTING into C##STEFAN.REGISTRACIJA
SET DEFINE OFF;
Insert into C##STEFAN.REGISTRACIJA (ID,IME,PREZIME,JMBG,ADRESA,KONTAKT_TELEFON,REGISTARSKA_OZNAKA,MARKA,MODEL,BOJA,BROJ_SASIJE,GODINA_PROIZVODNJE,ZAPREMINA_MOTORA,SNAGA_MOTORA,DATUM_REGISTRACIJE,REGISTROVAN_DO,KORISNIK_ID) values (2,'Marko','Markovic','456123987789','Balkanska 1','060/100100','BG-0001-AA','Fiat','Panda','Plava','100100123123',2008,1300,50,to_date('10-JAN-20','DD-MON-RR'),to_date('10-JAN-21','DD-MON-RR'),1);
REM INSERTING into C##STEFAN.REZERVACIJA
SET DEFINE OFF;
--------------------------------------------------------
--  DDL for Index AERODROM_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "C##STEFAN"."AERODROM_PK" ON "C##STEFAN"."AERODROM" ("AERODROMID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index PK_KORISNIKID
--------------------------------------------------------

  CREATE UNIQUE INDEX "C##STEFAN"."PK_KORISNIKID" ON "C##STEFAN"."KORISNICI" ("KORISNIKID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index KORISNIK_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "C##STEFAN"."KORISNIK_PK" ON "C##STEFAN"."KORISNIK" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index RASPORED_LETOVA_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "C##STEFAN"."RASPORED_LETOVA_PK" ON "C##STEFAN"."RASPORED_LETOVA" ("BROJLETA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index REGISTRACIJA_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "C##STEFAN"."REGISTRACIJA_PK" ON "C##STEFAN"."REGISTRACIJA" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index REZERVACIJA_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "C##STEFAN"."REZERVACIJA_PK" ON "C##STEFAN"."REZERVACIJA" ("REZERVACIJAID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Trigger KORISNIK_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "C##STEFAN"."KORISNIK_TRG" 
BEFORE INSERT ON KORISNIK 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT KORISNIK_SEQ.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;


/
ALTER TRIGGER "C##STEFAN"."KORISNIK_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger REGISTRACIJA_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "C##STEFAN"."REGISTRACIJA_TRG" 
BEFORE INSERT ON REGISTRACIJA 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    NULL;
  END COLUMN_SEQUENCES;
END;


/
ALTER TRIGGER "C##STEFAN"."REGISTRACIJA_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger REGISTRACIJA_TRG1
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "C##STEFAN"."REGISTRACIJA_TRG1" 
BEFORE INSERT ON REGISTRACIJA 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT REGISTRACIJA_SEQ1.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;


/
ALTER TRIGGER "C##STEFAN"."REGISTRACIJA_TRG1" ENABLE;
--------------------------------------------------------
--  Constraints for Table AERODROM
--------------------------------------------------------

  ALTER TABLE "C##STEFAN"."AERODROM" MODIFY ("AERODROMID" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."AERODROM" ADD CONSTRAINT "AERODROM_PK" PRIMARY KEY ("AERODROMID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table KORISNICI
--------------------------------------------------------

  ALTER TABLE "C##STEFAN"."KORISNICI" MODIFY ("KORISNIKID" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."KORISNICI" MODIFY ("IME" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."KORISNICI" MODIFY ("PREZIME" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."KORISNICI" MODIFY ("USERNAME" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."KORISNICI" MODIFY ("LOZINKA" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."KORISNICI" ADD CONSTRAINT "PK_KORISNIKID" PRIMARY KEY ("KORISNIKID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table KORISNIK
--------------------------------------------------------

  ALTER TABLE "C##STEFAN"."KORISNIK" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."KORISNIK" ADD CONSTRAINT "KORISNIK_PK" PRIMARY KEY ("ID")
  USING INDEX "C##STEFAN"."KORISNIK_PK"  ENABLE;
--------------------------------------------------------
--  Constraints for Table RASPORED_LETOVA
--------------------------------------------------------

  ALTER TABLE "C##STEFAN"."RASPORED_LETOVA" MODIFY ("BROJLETA" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."RASPORED_LETOVA" ADD CONSTRAINT "RASPORED_LETOVA_PK" PRIMARY KEY ("BROJLETA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table REGISTRACIJA
--------------------------------------------------------

  ALTER TABLE "C##STEFAN"."REGISTRACIJA" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."REGISTRACIJA" ADD CONSTRAINT "REGISTRACIJA_PK" PRIMARY KEY ("ID")
  USING INDEX "C##STEFAN"."REGISTRACIJA_PK"  ENABLE;
  ALTER TABLE "C##STEFAN"."REGISTRACIJA" MODIFY ("IME" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."REGISTRACIJA" MODIFY ("PREZIME" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."REGISTRACIJA" MODIFY ("JMBG" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."REGISTRACIJA" MODIFY ("ADRESA" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."REGISTRACIJA" MODIFY ("KONTAKT_TELEFON" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."REGISTRACIJA" MODIFY ("REGISTARSKA_OZNAKA" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."REGISTRACIJA" MODIFY ("MARKA" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."REGISTRACIJA" MODIFY ("MODEL" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."REGISTRACIJA" MODIFY ("BOJA" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."REGISTRACIJA" MODIFY ("BROJ_SASIJE" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."REGISTRACIJA" MODIFY ("GODINA_PROIZVODNJE" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."REGISTRACIJA" MODIFY ("ZAPREMINA_MOTORA" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."REGISTRACIJA" MODIFY ("SNAGA_MOTORA" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table REZERVACIJA
--------------------------------------------------------

  ALTER TABLE "C##STEFAN"."REZERVACIJA" MODIFY ("REZERVACIJAID" NOT NULL ENABLE);
  ALTER TABLE "C##STEFAN"."REZERVACIJA" ADD CONSTRAINT "REZERVACIJA_PK" PRIMARY KEY ("REZERVACIJAID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table RASPORED_LETOVA
--------------------------------------------------------

  ALTER TABLE "C##STEFAN"."RASPORED_LETOVA" ADD CONSTRAINT "FK1_AERODROM" FOREIGN KEY ("ID_POLAZNOG_AERODROMA")
	  REFERENCES "C##STEFAN"."AERODROM" ("AERODROMID") ENABLE;
  ALTER TABLE "C##STEFAN"."RASPORED_LETOVA" ADD CONSTRAINT "FK2_AERODROM" FOREIGN KEY ("ID_ODREDISNOG_AERODROMA")
	  REFERENCES "C##STEFAN"."AERODROM" ("AERODROMID") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table REZERVACIJA
--------------------------------------------------------

  ALTER TABLE "C##STEFAN"."REZERVACIJA" ADD CONSTRAINT "FK_KORISNICI" FOREIGN KEY ("KORISNIKID")
	  REFERENCES "C##STEFAN"."KORISNICI" ("KORISNIKID") ENABLE;
  ALTER TABLE "C##STEFAN"."REZERVACIJA" ADD CONSTRAINT "FK_RASPORED_LETOVA" FOREIGN KEY ("BROJLETA")
	  REFERENCES "C##STEFAN"."RASPORED_LETOVA" ("BROJLETA") ENABLE;
